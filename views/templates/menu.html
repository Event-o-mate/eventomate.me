<!-- NAVBAR-->
<ng-controller ng-controller="MenuController as menu">
  <nav class="navbar navbar-light">
    
    <button class="navbar-toggler hidden-lg-up" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"></button>
    
    <div class="collapse navbar-toggleable-md" id="navbarResponsive">
      <a class="navbar-brand logo-event-o-mate" href="#/">Event-O-Mate</a>
      <ul class="nav navbar-nav">
        <li class="nav-item">
          <a class="nav-link create-event-button" ng-href="#/create_event" >Create event</a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link login-button" ng-hide="menu.security.userValid" ng-click="menu.toggleLogin()" href> Log In</a>
        </li>

        <li class="nav-item">
          <a class="nav-link logout-button" ng-show="menu.security.userValid" ng-click="menu.logout()" href>Log Out </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link register-button" ng-hide="menu.security.userValid" ng-click="menu.toggleRegister()" href> Register</a>
        </li>

        <li class="nav-item">
          <a class="nav-link dashboard-button" ng-show="menu.security.userValid" ng-href="#/dashboard"> Dashboard</a>
        </li>

      </ul>
    </div>

  </nav>
</ng-controller>

<!-- LOGIN MENU-->
<script type="text/ng-template" id="loginDialog">
  <form name="loginForm" required>
    <div class="login-dialog">
      <input type="email" name="userEmail" class="input-email-login ng-remove-focus" placeholder="email*" ng-model="email" autocomplete="off" required>
      <input name="userPassword" class="input-password-login ng-remove-focus" placeholder="password*" type="password" ng-model="password" autocomplete="off" required>
      <button class="button-dropdown  btn" ng-click="login()"> LOGIN</button>
      <p><a href ng-click=closeThisDialog("register")>Don't have an account? Register.</a></p>

      <!--alerts-->
      <!-- email -->
      <div ng-messages="loginForm.userEmail.$error" ng-if="loginForm.userPassword.$touched">
        <div ng-message="required" class="alert alert-danger login-errors" role="alert">
          Please eneter all required fields!
        </div>
        <div ng-message="email" class="alert alert-danger login-errors" role="alert">
          Input is not a valid email!
        </div>
      </div>

      <!-- password -->
      <div ng-messages="loginForm.userPassword.$error" ng-if="loginSubmited">
        <div ng-message="required" class="alert alert-danger login-errors" role="alert">
          Please eneter all required fields!
        </div>
      </div>

      <!-- submited -->
      <div class="alert alert-danger text-center login-errors" role="alert" ng-hide="!userValid" ng-show="loginSubmited && !userValid">
        {{ errorMsg }}
      </div>

    </div>

  </form>

</script>

<!-- REGISTER MENU -->
<script type="text/ng-template" id="registerDialog">
  <form name="registerForm" required>
    <div class="registar-dialog" >
      <input name="userName" class="input-name-register ng-remove-focus" placeholder="name*" type="name" ng-model="name" autocomplete="off" required>
      <input name="userEmail" class="input-email-register ng-remove-focus" placeholder="email*" type="email" ng-model="email" autocomplete="off" required>
      <input name="userPassword" class="input-password-register" placeholder="password*" type="password" ng-model="password" autocomplete="off" required>
      <button class="button-dropdown btn" ng-click="register()"> REGISTER</button>

      <div ng-messages="registerForm.userName.$error" ng-if="registerSubmited">
        <div ng-message="required" class="alert alert-danger login-errors" role="alert">
          Please eneter all required fields!
        </div>
      </div>

      <div ng-messages="registerForm.userEmail.$error" ng-if="registerForm.userEmail.$touched">
        <div ng-message="required" class="alert alert-danger login-errors" role="alert">
          Please eneter all required fields!
        </div>
        <div ng-message="email" class="alert alert-danger login-errors" role="alert">
            Input is not a valid email!
        </div>
      </div>

      <!-- password -->
      <div ng-messages="registerForm.userPassword.$error" ng-if="registerSubmited">
        <div ng-message="required" class="alert alert-danger login-errors" role="alert">
          Please eneter all required fields!
        </div>
      </div>

      <!-- submited -->
      <div class="alert alert-danger text-center login-errors" role="alert" ng-show="registerSubmited && !userValid">
        {{ errorMsg }}
      </div>
    </div>
  </form>

</script>
